CREATE SCHEMA IF NOT EXISTS ASGARD_PRIVATE_SCHOOL;

USE ASGARD_PRIVATE_SCHOOL;

CREATE TABLE `STUDENTS` (
	`ID` INT NOT NULL AUTO_INCREMENT,
    `FIRST_NAME` VARCHAR (15) NOT NULL,
    `LAST_NAME`  VARCHAR (25) NOT NULL,
    `DATE_OF_BIRTH` DATE NOT NULL ,
    `TUITION_FEES`  DECIMAL (7.2) NOT NULL,
    
    UNIQUE ( `FIRST_NAME`, `LAST_NAME`, `DATE_OF_BIRTH`),
	PRIMARY KEY(`ID`)
    
    
);

CREATE TABLE `TRAINERS` (
	`ID` INT NOT NULL AUTO_INCREMENT,
    `FIRST_NAME` VARCHAR (15) NOT NULL,
    `LAST_NAME`  VARCHAR (25) NOT NULL,
    `SUBJECT` VARCHAR (25) NOT NULL ,
    
    UNIQUE ( `FIRST_NAME`, `LAST_NAME`,`SUBJECT`),
    
	PRIMARY KEY(`ID`)
);

CREATE TABLE `COURSES` (
	`ID` INT NOT NULL AUTO_INCREMENT,
    `TITLE` VARCHAR (25) NOT NULL,
    `STREAM`  VARCHAR (25) NOT NULL,
    `TYPE` VARCHAR (25) NOT NULL,
    `START_DATE` DATE NOT NULL,
    `END_DATE` DATE NOT NULL,
	PRIMARY KEY(`ID`)
);

CREATE TABLE `ASSIGNMENTS` (
	`ID` INT NOT NULL AUTO_INCREMENT,
    `TITLE` VARCHAR (25) NOT NULL,
    `DESCRIPTION`  VARCHAR (25) NOT NULL,
    `SUB_DATE` DATE  NOT NULL,
    `TOTAL_MARK` DECIMAL (5.2) NOT NULL,
    
	PRIMARY KEY(`ID`)
);

CREATE TABLE `STUDENTS_PER_COURSE` (

	`ID` INT NOT NULL AUTO_INCREMENT,
	`COURSE_ID` INT ,
    `STUDENT_ID` INT,
    
    CONSTRAINT `FK_STUDENTS_PER_COURSE__COURSES_ID` 
    FOREIGN KEY(`COURSE_ID`) 
    REFERENCES `COURSES`(`ID`),
    
    CONSTRAINT `FK_STUDENTS_PER_COURSE__STUDENTS_ID` 
    FOREIGN KEY(`STUDENT_ID`) 
    REFERENCES `STUDENTS`(`ID`),
    
	PRIMARY KEY (`ID`),
    UNIQUE (`COURSE_ID`,`STUDENT_ID`)

);


CREATE TABLE `TRAINERS_PER_COURSE` (

	`ID` INT NOT NULL AUTO_INCREMENT,
	`COURSE_ID` INT ,
    `TRAINER_ID` INT,
    
    CONSTRAINT `FK_TRAINERS_PER_COURSE__COURSES_ID` 
    FOREIGN KEY(`COURSE_ID`) 
    REFERENCES `COURSES`(`ID`),
    
    CONSTRAINT `FK_TRAINERS_PER_COURSE__TRAINERS_ID` 
    FOREIGN KEY(`TRAINER_ID`) 
    REFERENCES `TRAINERS`(`ID`),
    
	PRIMARY KEY (`ID`),
    UNIQUE (`COURSE_ID`,`TRAINER_ID`)

);


CREATE TABLE `ASSIGNMENTS_PER_COURSE` (

	`ID` INT NOT NULL AUTO_INCREMENT,
	`COURSE_ID` INT ,
    `ASSIGNMENT_ID` INT,
    
    CONSTRAINT `FK_ASSIGNMENTS_PER_COURSE__COURSES_ID` 
    FOREIGN KEY(`COURSE_ID`) 
    REFERENCES `COURSES`(`ID`),
    
    CONSTRAINT `FK_ASSIGNMENTS_PER_COURSE__ASSIGNMENTS_ID` 
    FOREIGN KEY(`ASSIGNMENT_ID`) 
    REFERENCES `ASSIGNMENTS`(`ID`),
    
	PRIMARY KEY (`ID`),
    UNIQUE (`COURSE_ID`,`ASSIGNMENT_ID`)

);

CREATE TABLE `ASSIGNMENTS_PER_COURSE_PER_STUDENT` (

	`ID` INT NOT NULL AUTO_INCREMENT,
	`COURSE_ID` INT ,
    `ASSIGNMENT_ID` INT,
    `STUDENT_ID` INT,
    
    CONSTRAINT `FK_ASSIGNMENTS_PER_COURSE_PER_STUDENT__COURSES_ID` 
    FOREIGN KEY(`COURSE_ID`) 
    REFERENCES `COURSES`(`ID`),
    
    CONSTRAINT `FK_ASSIGNMENTS_PER_COURSE_PER_STUDENT__ASSIGNMENTS_ID` 
    FOREIGN KEY(`ASSIGNMENT_ID`) 
    REFERENCES `ASSIGNMENTS`(`ID`),
    
    CONSTRAINT `FK_ASSIGNMENTS_PER_COURSE_PER_STUDENT__STUDENTS_ID` 
    FOREIGN KEY(`STUDENT_ID`) 
    REFERENCES `STUDENTS`(`ID`),
    
	PRIMARY KEY (`ID`),
    UNIQUE (`COURSE_ID`,`ASSIGNMENT_ID`,`STUDENT_ID`)

);




